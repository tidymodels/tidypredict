<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>LightGBM models • tidypredict</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="LightGBM models">
<script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js" data-max-height="43" data-light-bg="#666f76" data-light-fg="#f9f9f9"></script><script defer data-domain="tidypredict.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidypredict</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-model-list" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Model list</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-model-list">
<li><a class="dropdown-item" href="../articles/lm.html">Linear Regression - lm()</a></li>
    <li><a class="dropdown-item" href="../articles/glm.html">Generalized Regression - glm()</a></li>
    <li><a class="dropdown-item" href="../articles/glmnet.html">Regularized Regression - glmnet()</a></li>
    <li><a class="dropdown-item" href="../articles/ranger.html">Random Forest - Ranger - ranger()</a></li>
    <li><a class="dropdown-item" href="../articles/rf.html">Random Forest - randomForest()</a></li>
    <li><a class="dropdown-item" href="../articles/rpart.html">Decision Tree - rpart()</a></li>
    <li><a class="dropdown-item" href="../articles/mars.html">MARS - earth()</a></li>
    <li><a class="dropdown-item" href="../articles/cubist.html">Cubist - cubist()</a></li>
    <li><a class="dropdown-item" href="../articles/xgboost.html">XGboost - xgb.Booster.complete()</a></li>
    <li><a class="dropdown-item" href="../articles/lightgbm.html">LightGBM - lgb.Booster()</a></li>
    <li><a class="dropdown-item" href="../articles/catboost.html">CatBoost - catboost.Model()</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/save.html">Save/Reload</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/non-r.html">Non-R models</a></li>
    <li><a class="dropdown-item" href="../articles/regression.html">Regression spec</a></li>
    <li><a class="dropdown-item" href="../articles/tree.html">Tree model spec</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/sql.html">DB Writeback</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidymodels/tidypredict/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>LightGBM models</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/tidypredict/blob/main/vignettes/lightgbm.Rmd" class="external-link"><code>vignettes/lightgbm.Rmd</code></a></small>
      <div class="d-none name"><code>lightgbm.Rmd</code></div>
    </div>

    
    
<table class="table">
<thead><tr class="header">
<th>Function</th>
<th>Works</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code><a href="../reference/tidypredict_fit.html">tidypredict_fit()</a></code>, <code><a href="../reference/tidypredict_sql.html">tidypredict_sql()</a></code>,
<code><a href="../reference/parse_model.html">parse_model()</a></code>
</td>
<td>✔</td>
</tr>
<tr class="even">
<td><code><a href="../reference/tidypredict_to_column.html">tidypredict_to_column()</a></code></td>
<td>✔</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/tidypredict_test.html">tidypredict_test()</a></code></td>
<td>✔</td>
</tr>
<tr class="even">
<td>
<code><a href="../reference/tidypredict_interval.html">tidypredict_interval()</a></code>,
<code><a href="../reference/tidypredict_sql_interval.html">tidypredict_sql_interval()</a></code>
</td>
<td>✗</td>
</tr>
<tr class="odd">
<td><code>parsnip</code></td>
<td>✔</td>
</tr>
</tbody>
</table>
<div class="section level2">
<h2 id="tidypredict_-functions">
<code>tidypredict_</code> functions<a class="anchor" aria-label="anchor" href="#tidypredict_-functions"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Microsoft/LightGBM" class="external-link">lightgbm</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Prepare data</span></span>
<span><span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.matrix.html" class="external-link">data.matrix</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mpg"</span>, <span class="st">"cyl"</span>, <span class="st">"disp"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">hp</span></span>
<span></span>
<span><span class="va">dtrain</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lightgbm/man/lgb.Dataset.html" class="external-link">lgb.Dataset</a></span><span class="op">(</span><span class="va">X</span>, label <span class="op">=</span> <span class="va">y</span>, colnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mpg"</span>, <span class="st">"cyl"</span>, <span class="st">"disp"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lightgbm/man/lgb.train.html" class="external-link">lgb.train</a></span><span class="op">(</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    num_leaves <span class="op">=</span> <span class="fl">4L</span>,</span>
<span>    learning_rate <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>    objective <span class="op">=</span> <span class="st">"regression"</span>,</span>
<span>    min_data_in_leaf <span class="op">=</span> <span class="fl">1L</span></span>
<span>  <span class="op">)</span>,</span>
<span>  data <span class="op">=</span> <span class="va">dtrain</span>,</span>
<span>  nrounds <span class="op">=</span> <span class="fl">10L</span>,</span>
<span>  verbose <span class="op">=</span> <span class="op">-</span><span class="fl">1L</span></span>
<span><span class="op">)</span></span></code></pre></div>
<ul>
<li>
<p>Create the R formula</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tidypredict_fit.html">tidypredict_fit</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt; case_when((cyl &lt;= 7 | is.na(cyl)) ~ 122.371527777778, cyl &gt; 7 &amp; </span></span>
<span><span class="co">#&gt;     (mpg &lt;= 15.1 | is.na(mpg)) &amp; (disp &lt;= 334 | is.na(disp)) ~ </span></span>
<span><span class="co">#&gt;     240.84375, cyl &gt; 7 &amp; (mpg &lt;= 15.1 | is.na(mpg)) &amp; disp &gt; </span></span>
<span><span class="co">#&gt;     334 ~ 187.34375, cyl &gt; 7 &amp; mpg &gt; 15.1 ~ 164.21875) + case_when((mpg &lt;= </span></span>
<span><span class="co">#&gt;     20.35 | is.na(mpg)) &amp; (mpg &lt;= 15.1 | is.na(mpg)) ~ 24.7864583333333, </span></span>
<span><span class="co">#&gt;     (mpg &lt;= 20.35 | is.na(mpg)) &amp; mpg &gt; 15.1 ~ 7.36516196529071, </span></span>
<span><span class="co">#&gt;     mpg &gt; 20.35 &amp; (mpg &lt;= 23.6 | is.na(mpg)) ~ -9.47147832598005, </span></span>
<span><span class="co">#&gt;     mpg &gt; 20.35 &amp; mpg &gt; 23.6 ~ -24.4000499589103) + case_when((mpg &lt;= </span></span>
<span><span class="co">#&gt;     21.45 | is.na(mpg)) &amp; (mpg &lt;= 17.55 | is.na(mpg)) &amp; (mpg &lt;= </span></span>
<span><span class="co">#&gt;     15.65 | is.na(mpg)) ~ 6.33150075541602, (mpg &lt;= 21.45 | is.na(mpg)) &amp; </span></span>
<span><span class="co">#&gt;     (mpg &lt;= 17.55 | is.na(mpg)) &amp; mpg &gt; 15.65 ~ 18.2080434163411, </span></span>
<span><span class="co">#&gt;     (mpg &lt;= 21.45 | is.na(mpg)) &amp; mpg &gt; 17.55 ~ 0.0642609119415283, </span></span>
<span><span class="co">#&gt;     mpg &gt; 21.45 ~ -11.2250245332718) + case_when((disp &lt;= 334 | </span></span>
<span><span class="co">#&gt;     is.na(disp)) &amp; (mpg &lt;= 15.1 | is.na(mpg)) ~ 31.5191459655761, </span></span>
<span><span class="co">#&gt;     (disp &lt;= 334 | is.na(disp)) &amp; mpg &gt; 15.1 ~ -4.16611832639445, </span></span>
<span><span class="co">#&gt;     disp &gt; 334 &amp; (disp &lt;= 380 | is.na(disp)) ~ 16.3295566439629, </span></span>
<span><span class="co">#&gt;     disp &gt; 334 &amp; disp &gt; 380 ~ -0.254162490367889) + case_when((disp &lt;= </span></span>
<span><span class="co">#&gt;     78.85 | is.na(disp)) ~ -10.7901678085327, disp &gt; 78.85 &amp; </span></span>
<span><span class="co">#&gt;     (mpg &lt;= 28.85 | is.na(mpg)) &amp; (disp &lt;= 334 | is.na(disp)) ~ </span></span>
<span><span class="co">#&gt;     -0.749505842104554, disp &gt; 78.85 &amp; (mpg &lt;= 28.85 | is.na(mpg)) &amp; </span></span>
<span><span class="co">#&gt;     disp &gt; 334 ~ 4.01884852349758, disp &gt; 78.85 &amp; mpg &gt; 28.85 ~ </span></span>
<span><span class="co">#&gt;     15.2098321914673) + case_when((disp &lt;= 78.85 | is.na(disp)) ~ </span></span>
<span><span class="co">#&gt;     -5.39508358637492, disp &gt; 78.85 &amp; (disp &lt;= 466 | is.na(disp)) &amp; </span></span>
<span><span class="co">#&gt;     (mpg &lt;= 15.1 | is.na(mpg)) ~ 4.51956310272216, disp &gt; 78.85 &amp; </span></span>
<span><span class="co">#&gt;     (disp &lt;= 466 | is.na(disp)) &amp; mpg &gt; 15.1 ~ 0.0956797075012456, </span></span>
<span><span class="co">#&gt;     disp &gt; 78.85 &amp; disp &gt; 466 ~ -8.61319732666016) + case_when((mpg &lt;= </span></span>
<span><span class="co">#&gt;     21.45 | is.na(mpg)) &amp; (disp &lt;= 153.35 | is.na(disp)) &amp; (cyl &lt;= </span></span>
<span><span class="co">#&gt;     5 | is.na(cyl)) ~ 0.427817046642302, (mpg &lt;= 21.45 | is.na(mpg)) &amp; </span></span>
<span><span class="co">#&gt;     (disp &lt;= 153.35 | is.na(disp)) &amp; cyl &gt; 5 ~ 25.0094966888427, </span></span>
<span><span class="co">#&gt;     (mpg &lt;= 21.45 | is.na(mpg)) &amp; disp &gt; 153.35 ~ -0.436469084024429, </span></span>
<span><span class="co">#&gt;     mpg &gt; 21.45 ~ -1.67079323530197) + case_when((disp &lt;= 334 | </span></span>
<span><span class="co">#&gt;     is.na(disp)) &amp; (mpg &lt;= 15.1 | is.na(mpg)) ~ 14.0927782058715, </span></span>
<span><span class="co">#&gt;     (disp &lt;= 334 | is.na(disp)) &amp; mpg &gt; 15.1 &amp; (disp &lt;= 288.4 | </span></span>
<span><span class="co">#&gt;         is.na(disp)) ~ -0.208523882286889, (disp &lt;= 334 | is.na(disp)) &amp; </span></span>
<span><span class="co">#&gt;         mpg &gt; 15.1 &amp; disp &gt; 288.4 ~ -11.3294992446899, disp &gt; </span></span>
<span><span class="co">#&gt;         334 ~ 1.61815292341635) + case_when((mpg &lt;= 13.8 | is.na(mpg)) ~ </span></span>
<span><span class="co">#&gt;     -3.70564748346806, mpg &gt; 13.8 &amp; (mpg &lt;= 17.55 | is.na(mpg)) &amp; </span></span>
<span><span class="co">#&gt;     (disp &lt;= 334 | is.na(disp)) ~ -0.805894414583842, mpg &gt; 13.8 &amp; </span></span>
<span><span class="co">#&gt;     (mpg &lt;= 17.55 | is.na(mpg)) &amp; disp &gt; 334 ~ 9.19054534534613, </span></span>
<span><span class="co">#&gt;     mpg &gt; 13.8 &amp; mpg &gt; 17.55 ~ -0.580966327060014) + case_when((disp &lt;= </span></span>
<span><span class="co">#&gt;     380 | is.na(disp)) &amp; (mpg &lt;= 17.55 | is.na(mpg)) ~ 1.89159697956509, </span></span>
<span><span class="co">#&gt;     (disp &lt;= 380 | is.na(disp)) &amp; mpg &gt; 17.55 &amp; (mpg &lt;= 18.95 | </span></span>
<span><span class="co">#&gt;         is.na(mpg)) ~ -6.20051162441571, (disp &lt;= 380 | is.na(disp)) &amp; </span></span>
<span><span class="co">#&gt;         mpg &gt; 17.55 &amp; mpg &gt; 18.95 ~ 0.834156103432178, disp &gt; </span></span>
<span><span class="co">#&gt;         380 ~ -2.94233404099941)</span></span></code></pre></div>
</li>
<li>
<p>Add the prediction to the original table</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">mtcars</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/tidypredict_to_column.html">tidypredict_to_column</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 32</span></span>
<span><span class="co">#&gt; Columns: 12</span></span>
<span><span class="co">#&gt; $ mpg  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 21.0<span style="color: #949494;">, </span>21.0<span style="color: #949494;">, </span>22.8<span style="color: #949494;">, </span>21.4<span style="color: #949494;">, </span>18.7<span style="color: #949494;">, </span>18.1<span style="color: #949494;">, </span>14.3<span style="color: #949494;">, </span>24.4<span style="color: #949494;">, </span>22.8<span style="color: #949494;">, </span>19…</span></span>
<span><span class="co">#&gt; $ cyl  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 6<span style="color: #949494;">, </span>6<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>6<span style="color: #949494;">, </span>8<span style="color: #949494;">, </span>6<span style="color: #949494;">, </span>8<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>6<span style="color: #949494;">, </span>6<span style="color: #949494;">, </span>8<span style="color: #949494;">, </span>8<span style="color: #949494;">, </span>8<span style="color: #949494;">, </span>8<span style="color: #949494;">, </span>8<span style="color: #949494;">, </span>8<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ disp <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 160.0<span style="color: #949494;">, </span>160.0<span style="color: #949494;">, </span>108.0<span style="color: #949494;">, </span>258.0<span style="color: #949494;">, </span>360.0<span style="color: #949494;">, </span>225.0<span style="color: #949494;">, </span>360.0<span style="color: #949494;">, </span>146.7<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ hp   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 110<span style="color: #949494;">, </span>110<span style="color: #949494;">, </span>93<span style="color: #949494;">, </span>110<span style="color: #949494;">, </span>175<span style="color: #949494;">, </span>105<span style="color: #949494;">, </span>245<span style="color: #949494;">, </span>62<span style="color: #949494;">, </span>95<span style="color: #949494;">, </span>123<span style="color: #949494;">, </span>123<span style="color: #949494;">, </span>180<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ drat <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 3.90<span style="color: #949494;">, </span>3.90<span style="color: #949494;">, </span>3.85<span style="color: #949494;">, </span>3.08<span style="color: #949494;">, </span>3.15<span style="color: #949494;">, </span>2.76<span style="color: #949494;">, </span>3.21<span style="color: #949494;">, </span>3.69<span style="color: #949494;">, </span>3.92<span style="color: #949494;">, </span>3.…</span></span>
<span><span class="co">#&gt; $ wt   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 2.620<span style="color: #949494;">, </span>2.875<span style="color: #949494;">, </span>2.320<span style="color: #949494;">, </span>3.215<span style="color: #949494;">, </span>3.440<span style="color: #949494;">, </span>3.460<span style="color: #949494;">, </span>3.570<span style="color: #949494;">, </span>3.190<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ qsec <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 16.46<span style="color: #949494;">, </span>17.02<span style="color: #949494;">, </span>18.61<span style="color: #949494;">, </span>19.44<span style="color: #949494;">, </span>17.02<span style="color: #949494;">, </span>20.22<span style="color: #949494;">, </span>15.84<span style="color: #949494;">, </span>20.00<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">#&gt; $ vs   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ am   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>0<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ gear <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ carb <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>2<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>1<span style="color: #949494;">, </span>2<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">#&gt; $ fit  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 107.75256<span style="color: #949494;">, </span>107.75256<span style="color: #949494;">, </span>95.22895<span style="color: #949494;">, </span>107.75256<span style="color: #949494;">, </span>186.49246<span style="color: #949494;">, </span>11…</span></span></code></pre></div>
</li>
<li>
<p>Confirm that <code>tidypredict</code> results match to the
model’s <code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> results. The <code>xg_df</code> argument
expects the matrix data set.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/tidypredict_test.html">tidypredict_test</a></span><span class="op">(</span><span class="va">model</span>, xg_df <span class="op">=</span> <span class="va">X</span><span class="op">)</span></span>
<span><span class="co">#&gt; tidypredict test results</span></span>
<span><span class="co">#&gt; Difference threshold: 1e-12</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  All results are within the difference threshold</span></span></code></pre></div>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="supported-objectives">Supported objectives<a class="anchor" aria-label="anchor" href="#supported-objectives"></a>
</h2>
<p>LightGBM supports many objective functions. The following objectives
are supported by <code>tidypredict</code>:</p>
<div class="section level3">
<h3 id="regression-objectives-identity-transform">Regression objectives (identity transform)<a class="anchor" aria-label="anchor" href="#regression-objectives-identity-transform"></a>
</h3>
<ul>
<li>
<code>regression</code> / <code>regression_l2</code> (default)</li>
<li><code>regression_l1</code></li>
<li><code>huber</code></li>
<li><code>fair</code></li>
<li><code>quantile</code></li>
<li><code>mape</code></li>
</ul>
</div>
<div class="section level3">
<h3 id="regression-objectives-exp-transform">Regression objectives (exp transform)<a class="anchor" aria-label="anchor" href="#regression-objectives-exp-transform"></a>
</h3>
<ul>
<li><code>poisson</code></li>
<li><code>gamma</code></li>
<li><code>tweedie</code></li>
</ul>
</div>
<div class="section level3">
<h3 id="binary-classification-sigmoid-transform">Binary classification (sigmoid transform)<a class="anchor" aria-label="anchor" href="#binary-classification-sigmoid-transform"></a>
</h3>
<ul>
<li><code>binary</code></li>
<li><code>cross_entropy</code></li>
</ul>
</div>
<div class="section level3">
<h3 id="multiclass-classification">Multiclass classification<a class="anchor" aria-label="anchor" href="#multiclass-classification"></a>
</h3>
<ul>
<li>
<code>multiclass</code> (softmax transform)</li>
<li>
<code>multiclassova</code> (per-class sigmoid)</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="binary-classification-example">Binary classification example<a class="anchor" aria-label="anchor" href="#binary-classification-example"></a>
</h2>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">X_bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.matrix.html" class="external-link">data.matrix</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mpg"</span>, <span class="st">"cyl"</span>, <span class="st">"disp"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">y_bin</span> <span class="op">&lt;-</span> <span class="va">mtcars</span><span class="op">$</span><span class="va">am</span></span>
<span></span>
<span><span class="va">dtrain_bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lightgbm/man/lgb.Dataset.html" class="external-link">lgb.Dataset</a></span><span class="op">(</span><span class="va">X_bin</span>, label <span class="op">=</span> <span class="va">y_bin</span>, colnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mpg"</span>, <span class="st">"cyl"</span>, <span class="st">"disp"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">model_bin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lightgbm/man/lgb.train.html" class="external-link">lgb.train</a></span><span class="op">(</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    num_leaves <span class="op">=</span> <span class="fl">4L</span>,</span>
<span>    learning_rate <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>    objective <span class="op">=</span> <span class="st">"binary"</span>,</span>
<span>    min_data_in_leaf <span class="op">=</span> <span class="fl">1L</span></span>
<span>  <span class="op">)</span>,</span>
<span>  data <span class="op">=</span> <span class="va">dtrain_bin</span>,</span>
<span>  nrounds <span class="op">=</span> <span class="fl">10L</span>,</span>
<span>  verbose <span class="op">=</span> <span class="op">-</span><span class="fl">1L</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/tidypredict_test.html">tidypredict_test</a></span><span class="op">(</span><span class="va">model_bin</span>, xg_df <span class="op">=</span> <span class="va">X_bin</span><span class="op">)</span></span>
<span><span class="co">#&gt; tidypredict test results</span></span>
<span><span class="co">#&gt; Difference threshold: 1e-12</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  All results are within the difference threshold</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="multiclass-classification-1">Multiclass classification<a class="anchor" aria-label="anchor" href="#multiclass-classification-1"></a>
</h2>
<p>For multiclass models, <code><a href="../reference/tidypredict_fit.html">tidypredict_fit()</a></code> returns a named
list of formulas, one for each class:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">X_iris</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.matrix.html" class="external-link">data.matrix</a></span><span class="op">(</span><span class="va">iris</span><span class="op">[</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">X_iris</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Sepal.Length"</span>, <span class="st">"Sepal.Width"</span>, <span class="st">"Petal.Length"</span>, <span class="st">"Petal.Width"</span><span class="op">)</span></span>
<span><span class="va">y_iris</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">iris</span><span class="op">$</span><span class="va">Species</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1L</span></span>
<span></span>
<span><span class="va">dtrain_iris</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lightgbm/man/lgb.Dataset.html" class="external-link">lgb.Dataset</a></span><span class="op">(</span><span class="va">X_iris</span>, label <span class="op">=</span> <span class="va">y_iris</span>, colnames <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">X_iris</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">model_multi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lightgbm/man/lgb.train.html" class="external-link">lgb.train</a></span><span class="op">(</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    num_leaves <span class="op">=</span> <span class="fl">4L</span>,</span>
<span>    learning_rate <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>    objective <span class="op">=</span> <span class="st">"multiclass"</span>,</span>
<span>    num_class <span class="op">=</span> <span class="fl">3L</span>,</span>
<span>    min_data_in_leaf <span class="op">=</span> <span class="fl">1L</span></span>
<span>  <span class="op">)</span>,</span>
<span>  data <span class="op">=</span> <span class="va">dtrain_iris</span>,</span>
<span>  nrounds <span class="op">=</span> <span class="fl">5L</span>,</span>
<span>  verbose <span class="op">=</span> <span class="op">-</span><span class="fl">1L</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit_formulas</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tidypredict_fit.html">tidypredict_fit</a></span><span class="op">(</span><span class="va">model_multi</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">fit_formulas</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "class_0" "class_1" "class_2"</span></span></code></pre></div>
<p>Each formula produces the predicted probability for that class:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">iris</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    prob_setosa <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="va">fit_formulas</span><span class="op">$</span><span class="va">class_0</span>,</span>
<span>    prob_versicolor <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="va">fit_formulas</span><span class="op">$</span><span class="va">class_1</span>,</span>
<span>    prob_virginica <span class="op">=</span> <span class="op">!</span><span class="op">!</span><span class="va">fit_formulas</span><span class="op">$</span><span class="va">class_2</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Species</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"prob_"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Species prob_setosa prob_versicolor prob_virginica</span></span>
<span><span class="co">#&gt; 1  setosa   0.9786973      0.01046491      0.0108378</span></span>
<span><span class="co">#&gt; 2  setosa   0.9786973      0.01046491      0.0108378</span></span>
<span><span class="co">#&gt; 3  setosa   0.9786973      0.01046491      0.0108378</span></span>
<span><span class="co">#&gt; 4  setosa   0.9786973      0.01046491      0.0108378</span></span>
<span><span class="co">#&gt; 5  setosa   0.9786973      0.01046491      0.0108378</span></span>
<span><span class="co">#&gt; 6  setosa   0.9786973      0.01046491      0.0108378</span></span></code></pre></div>
<p>Note: <code><a href="../reference/tidypredict_test.html">tidypredict_test()</a></code> does not support multiclass
models. Use <code><a href="../reference/tidypredict_fit.html">tidypredict_fit()</a></code> directly.</p>
</div>
<div class="section level2">
<h2 id="categorical-features">Categorical features<a class="anchor" aria-label="anchor" href="#categorical-features"></a>
</h2>
<p>LightGBM supports native categorical features. When a feature is
marked as categorical, <code>tidypredict</code> generates appropriate
<code>%in%</code> conditions:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">200</span></span>
<span><span class="va">cat_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  cat_feat <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">3</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  y <span class="op">=</span> <span class="cn">NA</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cat_data</span><span class="op">$</span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">cat_data</span><span class="op">$</span><span class="va">cat_feat</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, <span class="fl">10</span>, <span class="op">-</span><span class="fl">10</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, sd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span></span>
<span><span class="va">X_cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="va">cat_data</span><span class="op">$</span><span class="va">cat_feat</span>, ncol <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">X_cat</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"cat_feat"</span></span>
<span></span>
<span><span class="va">dtrain_cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lightgbm/man/lgb.Dataset.html" class="external-link">lgb.Dataset</a></span><span class="op">(</span></span>
<span>  <span class="va">X_cat</span>,</span>
<span>  label <span class="op">=</span> <span class="va">cat_data</span><span class="op">$</span><span class="va">y</span>,</span>
<span>  categorical_feature <span class="op">=</span> <span class="st">"cat_feat"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">model_cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lightgbm/man/lgb.train.html" class="external-link">lgb.train</a></span><span class="op">(</span></span>
<span>  params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    num_leaves <span class="op">=</span> <span class="fl">4L</span>,</span>
<span>    learning_rate <span class="op">=</span> <span class="fl">1.0</span>,</span>
<span>    objective <span class="op">=</span> <span class="st">"regression"</span>,</span>
<span>    min_data_in_leaf <span class="op">=</span> <span class="fl">1L</span></span>
<span>  <span class="op">)</span>,</span>
<span>  data <span class="op">=</span> <span class="va">dtrain_cat</span>,</span>
<span>  nrounds <span class="op">=</span> <span class="fl">2L</span>,</span>
<span>  verbose <span class="op">=</span> <span class="op">-</span><span class="fl">1L</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/tidypredict_fit.html">tidypredict_fit</a></span><span class="op">(</span><span class="va">model_cat</span><span class="op">)</span></span>
<span><span class="co">#&gt; case_when(cat_feat %in% 0:1 ~ 9.22111156962135, (!(cat_feat %in% </span></span>
<span><span class="co">#&gt;     0:1) | is.na(cat_feat)) ~ -9.19527530561794) + case_when(cat_feat %in% </span></span>
<span><span class="co">#&gt;     0:1 ~ 0.837108638881579, (!(cat_feat %in% 0:1) | is.na(cat_feat)) ~ </span></span>
<span><span class="co">#&gt;     -0.837108347632668)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="parsnip">parsnip<a class="anchor" aria-label="anchor" href="#parsnip"></a>
</h2>
<p><code>parsnip</code> fitted models (via the <code>bonsai</code>
package) are also supported by <code>tidypredict</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/tidymodels/parsnip" class="external-link">parsnip</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bonsai.tidymodels.org/" class="external-link">bonsai</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">p_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/boost_tree.html" class="external-link">boost_tree</a></span><span class="op">(</span></span>
<span>  trees <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  tree_depth <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  min_n <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine</a></span><span class="op">(</span><span class="st">"lightgbm"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_args.html" class="external-link">set_mode</a></span><span class="op">(</span><span class="st">"regression"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fit</a></span><span class="op">(</span><span class="va">hp</span> <span class="op">~</span> <span class="va">mpg</span> <span class="op">+</span> <span class="va">cyl</span> <span class="op">+</span> <span class="va">disp</span>, data <span class="op">=</span> <span class="va">mtcars</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extract the underlying lgb.Booster</span></span>
<span><span class="va">lgb_model</span> <span class="op">&lt;-</span> <span class="va">p_model</span><span class="op">$</span><span class="va">fit</span></span>
<span></span>
<span><span class="fu"><a href="../reference/tidypredict_test.html">tidypredict_test</a></span><span class="op">(</span><span class="va">lgb_model</span>, xg_df <span class="op">=</span> <span class="va">X</span><span class="op">)</span></span>
<span><span class="co">#&gt; tidypredict test results</span></span>
<span><span class="co">#&gt; Difference threshold: 1e-12</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  All results are within the difference threshold</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="parse-model-spec">Parse model spec<a class="anchor" aria-label="anchor" href="#parse-model-spec"></a>
</h2>
<p>Here is an example of the model spec:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parse_model.html">parse_model</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">pm</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 2</span></span>
<span><span class="co">#&gt;  $ general:List of 9</span></span>
<span><span class="co">#&gt;   ..$ model                 : chr "lgb.Booster"</span></span>
<span><span class="co">#&gt;   ..$ type                  : chr "lgb"</span></span>
<span><span class="co">#&gt;   ..$ version               : num 1</span></span>
<span><span class="co">#&gt;   ..$ params                :List of 8</span></span>
<span><span class="co">#&gt;   ..$ feature_names         : chr [1:3] "mpg" "cyl" "disp"</span></span>
<span><span class="co">#&gt;   ..$ nfeatures             : int 3</span></span>
<span><span class="co">#&gt;   ..$ num_class             : int 1</span></span>
<span><span class="co">#&gt;   ..$ num_tree_per_iteration: int 1</span></span>
<span><span class="co">#&gt;   ..$ niter                 : int 10</span></span>
<span><span class="co">#&gt;  $ trees  :List of 10</span></span>
<span><span class="co">#&gt;   ..$ :List of 4</span></span>
<span><span class="co">#&gt;   ..$ :List of 4</span></span>
<span><span class="co">#&gt;   ..$ :List of 4</span></span>
<span><span class="co">#&gt;   ..$ :List of 4</span></span>
<span><span class="co">#&gt;   ..$ :List of 4</span></span>
<span><span class="co">#&gt;   ..$ :List of 4</span></span>
<span><span class="co">#&gt;   ..$ :List of 4</span></span>
<span><span class="co">#&gt;   ..$ :List of 4</span></span>
<span><span class="co">#&gt;   ..$ :List of 4</span></span>
<span><span class="co">#&gt;   ..$ :List of 4</span></span>
<span><span class="co">#&gt;  - attr(*, "class")= chr [1:3] "parsed_model" "pm_lgb" "list"</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">pm</span><span class="op">$</span><span class="va">trees</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ :List of 4</span></span>
<span><span class="co">#&gt;   ..$ :List of 3</span></span>
<span><span class="co">#&gt;   .. ..$ prediction: num 122</span></span>
<span><span class="co">#&gt;   .. ..$ linear    : NULL</span></span>
<span><span class="co">#&gt;   .. ..$ path      :List of 1</span></span>
<span><span class="co">#&gt;   .. .. ..$ :List of 5</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ type   : chr "conditional"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ col    : chr "cyl"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ val    : num 7</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ op     : chr "less-equal"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ missing: logi TRUE</span></span>
<span><span class="co">#&gt;   ..$ :List of 3</span></span>
<span><span class="co">#&gt;   .. ..$ prediction: num 241</span></span>
<span><span class="co">#&gt;   .. ..$ linear    : NULL</span></span>
<span><span class="co">#&gt;   .. ..$ path      :List of 3</span></span>
<span><span class="co">#&gt;   .. .. ..$ :List of 5</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ type   : chr "conditional"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ col    : chr "cyl"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ val    : num 7</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ op     : chr "more"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ missing: logi FALSE</span></span>
<span><span class="co">#&gt;   .. .. ..$ :List of 5</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ type   : chr "conditional"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ col    : chr "mpg"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ val    : num 15.1</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ op     : chr "less-equal"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ missing: logi TRUE</span></span>
<span><span class="co">#&gt;   .. .. ..$ :List of 5</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ type   : chr "conditional"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ col    : chr "disp"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ val    : num 334</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ op     : chr "less-equal"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ missing: logi TRUE</span></span>
<span><span class="co">#&gt;   ..$ :List of 3</span></span>
<span><span class="co">#&gt;   .. ..$ prediction: num 187</span></span>
<span><span class="co">#&gt;   .. ..$ linear    : NULL</span></span>
<span><span class="co">#&gt;   .. ..$ path      :List of 3</span></span>
<span><span class="co">#&gt;   .. .. ..$ :List of 5</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ type   : chr "conditional"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ col    : chr "cyl"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ val    : num 7</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ op     : chr "more"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ missing: logi FALSE</span></span>
<span><span class="co">#&gt;   .. .. ..$ :List of 5</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ type   : chr "conditional"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ col    : chr "mpg"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ val    : num 15.1</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ op     : chr "less-equal"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ missing: logi TRUE</span></span>
<span><span class="co">#&gt;   .. .. ..$ :List of 5</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ type   : chr "conditional"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ col    : chr "disp"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ val    : num 334</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ op     : chr "more"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ missing: logi FALSE</span></span>
<span><span class="co">#&gt;   ..$ :List of 3</span></span>
<span><span class="co">#&gt;   .. ..$ prediction: num 164</span></span>
<span><span class="co">#&gt;   .. ..$ linear    : NULL</span></span>
<span><span class="co">#&gt;   .. ..$ path      :List of 2</span></span>
<span><span class="co">#&gt;   .. .. ..$ :List of 5</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ type   : chr "conditional"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ col    : chr "cyl"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ val    : num 7</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ op     : chr "more"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ missing: logi FALSE</span></span>
<span><span class="co">#&gt;   .. .. ..$ :List of 5</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ type   : chr "conditional"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ col    : chr "mpg"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ val    : num 15.1</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ op     : chr "more"</span></span>
<span><span class="co">#&gt;   .. .. .. ..$ missing: logi FALSE</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="limitations">Limitations<a class="anchor" aria-label="anchor" href="#limitations"></a>
</h2>
<ul>
<li>Ranking objectives (<code>lambdarank</code>,
<code>rank_xendcg</code>) are not supported</li>
<li>Prediction intervals are not supported</li>
<li>
<code><a href="../reference/tidypredict_test.html">tidypredict_test()</a></code> does not support multiclass
models</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by Emil Hvitfeldt, Edgar Ruiz, <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

  </div></footer>
</body>
</html>
